<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="roleR">
<title>roleR Use Cases • roleR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="roleR Use Cases">
<meta property="og:description" content="roleR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">roleR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/roleR_intro.html">roleR_intro</a>
    <a class="dropdown-item" href="../articles/roleR_use_cases.html">roleR Use Cases</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>roleR Use Cases</h1>
                        <h4 data-toc-skip class="author">Jacob Idec</h4>
            
            <h4 data-toc-skip class="date">2023-02-28</h4>
      
      
      <div class="d-none name"><code>roleR_use_cases.Rmd</code></div>
    </div>

    
    
<p>This document shows off various use cases using the current
implementation of roleR</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Install from GitHub</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># devtools::install_github("role-model/roleR")</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">roleR</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>Run a model and plot species richness over time</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roleParams.html">roleParams</a></span><span class="op">(</span>individuals_local <span class="op">=</span> <span class="fl">100</span>, individuals_meta <span class="op">=</span> <span class="fl">1000</span>, species_meta <span class="op">=</span> <span class="fl">100</span>, </span>
<span>                    speciation_local <span class="op">=</span> <span class="fl">0.1</span>, speciation_meta <span class="op">=</span> <span class="fl">0.1</span>, extinction_meta <span class="op">=</span> <span class="fl">0.05</span>, dispersal_prob <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>                    trait_sigma<span class="op">=</span><span class="fl">1</span>, env_sigma<span class="op">=</span><span class="fl">1</span>, comp_sigma <span class="op">=</span> <span class="fl">0.5</span>, neut_delta<span class="op">=</span><span class="fl">1</span>, env_comp_delta<span class="op">=</span><span class="fl">1</span>,</span>
<span>                    mutation_rate<span class="op">=</span><span class="fl">0</span>,equilib_escape <span class="op">=</span> <span class="fl">1</span>, alpha<span class="op">=</span><span class="fl">50</span>, num_basepairs <span class="op">=</span> <span class="fl">250</span>,</span>
<span>                    init_type <span class="op">=</span> <span class="st">'oceanic_island'</span>, niter <span class="op">=</span> <span class="fl">1000</span>, niterTimestep <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runRole.html">runRole</a></span><span class="op">(</span><span class="fu"><a href="../reference/roleModel.html">roleModel</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSumStats.html">getSumStats</a></span><span class="op">(</span><span class="va">model</span>,funs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rich<span class="op">=</span><span class="va">richness</span><span class="op">)</span><span class="op">)</span> <span class="co">#TODO add default where all existing sumstats are added</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">stats</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">iteration</span>, <span class="va">rich</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="roleR_use_cases_files/figure-html/overview-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="parameter-creation">Parameter Creation<a class="anchor" aria-label="anchor" href="#parameter-creation"></a>
</h2>
<p>Create a set of parameters specifying every one</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roleParams.html">roleParams</a></span><span class="op">(</span>individuals_local <span class="op">=</span> <span class="fl">100</span>, individuals_meta <span class="op">=</span> <span class="fl">1000</span>, species_meta <span class="op">=</span> <span class="fl">100</span>, </span>
<span>                    speciation_local <span class="op">=</span> <span class="fl">0.1</span>, speciation_meta <span class="op">=</span> <span class="fl">0.1</span>, extinction_meta <span class="op">=</span> <span class="fl">0.05</span>, dispersal_prob <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>                    trait_sigma<span class="op">=</span><span class="fl">1</span>, env_sigma<span class="op">=</span><span class="fl">1</span>, comp_sigma <span class="op">=</span> <span class="fl">0.5</span>, neut_delta<span class="op">=</span><span class="fl">1</span>, env_comp_delta<span class="op">=</span><span class="fl">1</span>,</span>
<span>                    mutation_rate<span class="op">=</span><span class="fl">0</span>,equilib_escape <span class="op">=</span> <span class="fl">1</span>, alpha<span class="op">=</span><span class="fl">50</span>, num_basepairs <span class="op">=</span> <span class="fl">250</span>,</span>
<span>                    init_type <span class="op">=</span> <span class="st">'oceanic_island'</span>, niter <span class="op">=</span> <span class="fl">1000</span>, niterTimestep <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Create a set of params per the Unified Neutral Theory of Biodiversity
(UNTB). This creates a “UNTB-flavored” RoLE model</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_untb</span> <span class="op">&lt;-</span> <span class="fu">untbParams</span><span class="op">(</span>individuals_local <span class="op">=</span> <span class="fl">100</span>, individuals_meta <span class="op">=</span> <span class="fl">1000</span>, </span>
<span>                        species_meta <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                        speciation <span class="op">=</span> <span class="fl">0.2</span>, </span>
<span>                        dispersal_prob <span class="op">=</span> <span class="fl">0.1</span>, init_type <span class="op">=</span> <span class="st">'oceanic_island'</span>,</span>
<span>                        niter <span class="op">=</span> <span class="fl">1000</span>, niterTimestep <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>   </span></code></pre></div>
<p>See the roleParams documentation for descriptions of all available
parameters</p>
<p><span style="color:blue">Group Question: Should default parameters
exist so that simply p &lt;- roleParams() creates a valid params? If so
what should the defaults be? </span></p>
</div>
<div class="section level2">
<h2 id="model-experiment-creation-running">Model &amp; Experiment Creation &amp; Running<a class="anchor" aria-label="anchor" href="#model-experiment-creation-running"></a>
</h2>
<p>Create a model (not yet run) using the params, then run it</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roleModel.html">roleModel</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runRole.html">runRole</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p>Create an experiment (not yet run) containing two models created
using both sets of params, then run it. Experiment running can be
parallelized on Windows, Mac, &amp; Linux by specifying the number of
cores to use. When you run an experiment, it runs every model within
it.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roleExperiment.html">roleExperiment</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">p</span>,<span class="va">p_untb</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span>
<span><span class="va">exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runRole.html">runRole</a></span><span class="op">(</span><span class="va">exp</span>,cores<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Experiments are intended to encapsulate one or more hypotheses
through comparison of multiple varying models contained within them</p>
<p><span style="color:blue">Group Question: Is encapsulating multiple
models as experiments useful, or would you rather deal with models
individually in your use cases? </span></p>
</div>
<div class="section level2">
<h2 id="extracting-data-from-models">Extracting Data From Models<a class="anchor" aria-label="anchor" href="#extracting-data-from-models"></a>
</h2>
<p>Get a summary stats over time for a single model, each row being a
different saved iteration state. Available raw stats are rawAbundance,
rawSpAbundance, rawTraits, rawGenDiv, rawBranchLengths, and rawApePhylo.
Available transformed stats are hillAbund, hillGenetic, hillTrait,
hillPhylo, and richness.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSumStats.html">getSumStats</a></span><span class="op">(</span><span class="va">model</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rich <span class="op">=</span> <span class="va">richness</span>,hill_abund<span class="op">=</span><span class="va">hillAbund</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">stats</span></span></code></pre></div>
<pre><code><span><span class="co">##     rich hill_abund_1 hill_abund_2 hill_abund_3 hill_abund_4 iteration</span></span>
<span><span class="co">## 1      1     1.000000     1.000000     1.000000     1.000000         0</span></span>
<span><span class="co">## 2      2     1.057599     1.020200     1.015189     1.013491        10</span></span>
<span><span class="co">## 3      3     1.166301     1.062248     1.046743     1.041448        20</span></span>
<span><span class="co">## 4      4     1.182582     1.062473     1.046747     1.041448        30</span></span>
<span><span class="co">## 5      6     1.377968     1.130710     1.097249     1.085999        40</span></span>
<span><span class="co">## 6      6     1.377968     1.130710     1.097249     1.085999        50</span></span>
<span><span class="co">## 7      6     1.552092     1.204819     1.151927     1.133995        60</span></span>
<span><span class="co">## 8      6     1.552092     1.204819     1.151927     1.133995        70</span></span>
<span><span class="co">## 9      6     1.595092     1.230315     1.171138     1.150825        80</span></span>
<span><span class="co">## 10     8     1.780161     1.286339     1.211282     1.185830        90</span></span>
<span><span class="co">## 11     8     1.854392     1.315443     1.232217     1.204038       100</span></span>
<span><span class="co">## 12    14     2.650590     1.551350     1.397343     1.346516       110</span></span>
<span><span class="co">## 13    13     2.622997     1.551350     1.397360     1.346517       120</span></span>
<span><span class="co">## 14    12     2.669039     1.588310     1.423906     1.369288       130</span></span>
<span><span class="co">## 15    13     2.744076     1.590331     1.423976     1.369291       140</span></span>
<span><span class="co">## 16    16     3.467181     1.807011     1.570608     1.494016       150</span></span>
<span><span class="co">## 17    16     3.351236     1.761184     1.539347     1.467517       160</span></span>
<span><span class="co">## 18    16     3.467181     1.807011     1.570608     1.494016       170</span></span>
<span><span class="co">## 19    16     3.333747     1.760563     1.539325     1.467516       180</span></span>
<span><span class="co">## 20    13     3.118923     1.755002     1.539117     1.467507       190</span></span>
<span><span class="co">## 21    16     3.833847     1.954652     1.670952     1.578763       200</span></span>
<span><span class="co">## 22    18     4.311784     2.120441     1.782375     1.672291       210</span></span>
<span><span class="co">## 23    17     4.395207     2.179599     1.822307     1.705648       220</span></span>
<span><span class="co">## 24    19     5.241087     2.515091     2.045833     1.891394       230</span></span>
<span><span class="co">## 25    17     4.871375     2.434275     1.997126     1.851454       240</span></span>
<span><span class="co">## 26    19     5.812892     2.756340     2.202900     2.020632       250</span></span>
<span><span class="co">## 27    18     5.983269     2.847380     2.260085     2.067219       260</span></span>
<span><span class="co">## 28    19     5.847433     2.759382     2.203124     2.020649       270</span></span>
<span><span class="co">## 29    21     5.983455     2.688172     2.149221     1.975932       280</span></span>
<span><span class="co">## 30    19     6.254305     2.937720     2.319044     2.115639       290</span></span>
<span><span class="co">## 31    18     6.190991     2.942908     2.319867     2.115733       300</span></span>
<span><span class="co">## 32    19     6.879845     3.246753     2.514516     2.273807       310</span></span>
<span><span class="co">## 33    18     6.914254     3.346720     2.584747     2.331099       320</span></span>
<span><span class="co">## 34    17     6.914814     3.448276     2.658052     2.390938       330</span></span>
<span><span class="co">## 35    17     7.532543     3.924647     2.988472     2.659364       340</span></span>
<span><span class="co">## 36    18     7.819985     4.065041     3.082312     2.734878       350</span></span>
<span><span class="co">## 37    17     7.775524     4.269855     3.267590     2.894100       360</span></span>
<span><span class="co">## 38    16     7.948529     4.562044     3.487179     3.073346       370</span></span>
<span><span class="co">## 39    19     8.545324     4.492363     3.384991     2.983248       380</span></span>
<span><span class="co">## 40    21     9.535127     4.878049     3.623950     3.173129       390</span></span>
<span><span class="co">## 41    20     8.438775     4.314064     3.270105     2.894246       400</span></span>
<span><span class="co">## 42    21     8.726428     4.444444     3.370195     2.979608       410</span></span>
<span><span class="co">## 43    21     8.903257     4.549591     3.463755     3.065441       420</span></span>
<span><span class="co">## 44    24     9.726058     4.757374     3.584345     3.161790       430</span></span>
<span><span class="co">## 45    23     9.914331     4.901961     3.693735     3.257831       440</span></span>
<span><span class="co">## 46    24    10.356311     5.096840     3.823819     3.364159       450</span></span>
<span><span class="co">## 47    26    10.640099     5.102041     3.823316     3.364063       460</span></span>
<span><span class="co">## 48    29    12.568287     5.910165     4.307225     3.737528       470</span></span>
<span><span class="co">## 49    29    11.903194     5.353319     3.885847     3.382708       480</span></span>
<span><span class="co">## 50    29    12.751651     5.707763     4.056470     3.503485       490</span></span>
<span><span class="co">## 51    28    11.437683     4.878049     3.518902     3.077913       500</span></span>
<span><span class="co">## 52    28    11.687293     5.186722     3.755261     3.274851       510</span></span>
<span><span class="co">## 53    29    12.712458     5.681818     4.049081     3.501549       520</span></span>
<span><span class="co">## 54    27    12.342883     5.827506     4.188613     3.620413       530</span></span>
<span><span class="co">## 55    28    12.086306     5.605381     4.041138     3.500587       540</span></span>
<span><span class="co">## 56    27    11.121485     5.005005     3.636003     3.174908       550</span></span>
<span><span class="co">## 57    27    10.129694     4.468275     3.289474     2.897638       560</span></span>
<span><span class="co">## 58    26     9.597287     4.280822     3.182004     2.813809       570</span></span>
<span><span class="co">## 59    27     9.810910     4.416961     3.282767     2.896654       580</span></span>
<span><span class="co">## 60    28    10.266878     4.591368     3.392697     2.984396       590</span></span>
<span><span class="co">## 61    26     9.441094     4.266212     3.181424     2.813892       600</span></span>
<span><span class="co">## 62    29    10.571834     4.629630     3.398217     2.985306       610</span></span>
<span><span class="co">## 63    30    11.146208     4.694836     3.405895     2.986417       620</span></span>
<span><span class="co">## 64    26     9.988937     4.472272     3.291611     2.898123       630</span></span>
<span><span class="co">## 65    26    10.028472     4.612546     3.398806     2.985599       640</span></span>
<span><span class="co">## 66    27     9.721426     4.409171     3.282236     2.896582       650</span></span>
<span><span class="co">## 67    26     9.796317     4.664179     3.491513     3.073410       660</span></span>
<span><span class="co">## 68    24     9.726809     4.960317     3.731032     3.271814       670</span></span>
<span><span class="co">## 69    25    11.026807     5.910165     4.446509     3.869424       680</span></span>
<span><span class="co">## 70    25    11.794519     6.510417     4.933116     4.299078       690</span></span>
<span><span class="co">## 71    24    11.783518     6.944444     5.332291     4.645426       700</span></span>
<span><span class="co">## 72    23    11.167746     6.501951     5.027983     4.418738       710</span></span>
<span><span class="co">## 73    25    12.584398     7.440476     5.653960     4.881899       720</span></span>
<span><span class="co">## 74    26    12.640804     7.299270     5.567597     4.838750       730</span></span>
<span><span class="co">## 75    26    12.286347     6.868132     5.243585     4.592890       740</span></span>
<span><span class="co">## 76    27    12.879308     7.267442     5.523092     4.811058       750</span></span>
<span><span class="co">## 77    26    12.302481     6.963788     5.370448     4.730432       760</span></span>
<span><span class="co">## 78    30    13.996393     7.418398     5.541378     4.813510       770</span></span>
<span><span class="co">## 79    31    14.079563     7.396450     5.535771     4.812452       780</span></span>
<span><span class="co">## 80    29    14.081533     8.116883     6.275052     5.525676       790</span></span>
<span><span class="co">## 81    28    13.287037     7.518797     5.798100     5.107046       800</span></span>
<span><span class="co">## 82    24    12.396368     7.541478     5.912504     5.236808       810</span></span>
<span><span class="co">## 83    25    12.993829     7.587253     5.822817     5.113456       820</span></span>
<span><span class="co">## 84    25    13.895228     8.503401     6.524947     5.679297       830</span></span>
<span><span class="co">## 85    26    14.715053     8.880995     6.714586     5.786604       840</span></span>
<span><span class="co">## 86    26    15.035594     9.310987     7.092020     6.102843       850</span></span>
<span><span class="co">## 87    24    13.979092     8.591065     6.490223     5.570997       860</span></span>
<span><span class="co">## 88    26    14.313591     8.375209     6.231770     5.333629       870</span></span>
<span><span class="co">## 89    24    13.193846     7.716049     5.733696     4.907196       880</span></span>
<span><span class="co">## 90    26    13.716002     7.836991     5.772541     4.921279       890</span></span>
<span><span class="co">## 91    26    15.019237     9.276438     6.943775     5.899979       900</span></span>
<span><span class="co">## 92    27    15.611846     9.689922     7.282411     6.191619       910</span></span>
<span><span class="co">## 93    27    15.496819     9.487666     7.028672     5.933558       920</span></span>
<span><span class="co">## 94    28    16.195773     9.746589     7.105973     5.956811       930</span></span>
<span><span class="co">## 95    29    17.188118    10.438413     7.550235     6.284465       940</span></span>
<span><span class="co">## 96    29    16.838798    10.548523     7.847060     6.590835       950</span></span>
<span><span class="co">## 97    27    16.966675    11.061947     8.275492     6.947318       960</span></span>
<span><span class="co">## 98    29    16.980641    10.438413     7.737769     6.532130       970</span></span>
<span><span class="co">## 99    31    17.964659    10.729614     7.826845     6.565469       980</span></span>
<span><span class="co">## 100   31    17.920208    10.162602     7.172560     5.965626       990</span></span>
<span><span class="co">## 101   31    18.917588    11.682243     8.443706     6.994927      1000</span></span></code></pre>
<p>Get summary stats over time for one model of an experiment</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSumStats.html">getSumStats</a></span><span class="op">(</span><span class="va">exp</span><span class="op">@</span><span class="va">modelRuns</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hill_abund<span class="op">=</span><span class="va">hillAbund</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Create a custom summary statistic and extract it</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speciesWith5Indv</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">localComm</span><span class="op">@</span><span class="va">spAbund</span> <span class="op">&gt;</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> </span>
<span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSumStats.html">getSumStats</a></span><span class="op">(</span><span class="va">exp</span><span class="op">@</span><span class="va">modelRuns</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sp_with_5<span class="op">=</span><span class="va">speciesWith5Indv</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p><span style="color:blue">Group Question: Any ideas for more default
summary stats we could add? </span></p>
<p><span style="color:blue">Group Question: Besides plotting model data
over model iterations, any plotting functions you would want?
</span></p>
</div>
<div class="section level2">
<h2 id="extracting-data-from-experiments">Extracting Data From Experiments<a class="anchor" aria-label="anchor" href="#extracting-data-from-experiments"></a>
</h2>
<p>Get a dataframe containing all saved timesteps of all models in the
experiment</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSumStats.html">getSumStats</a></span><span class="op">(</span><span class="va">exp</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hill_abund<span class="op">=</span><span class="va">hillAbund</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Get a dataframe containing model metadata in the experiment, where
each row is an experiment with its associated params</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exp_model_params</span> <span class="op">&lt;-</span> <span class="va">exp</span><span class="op">@</span><span class="va">experimentMeta</span> </span></code></pre></div>
<p>Get transformed summary stats (such as the mean of a stat at an
iteration for multiple models) from an experiment (WIP)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># stats &lt;- getSumStats(exp, list(hill_abund_itermean=hillAbundItermean)) </span></span>
<span><span class="co">## where hillAbundItermean is a function that applies across an experiment rather than across a roleData </span></span></code></pre></div>
<p><span style="color:blue">Group Question: Are transformed summary
stats summarized from multiple models useful? Any other
multiple-model-summarizing functions other than mean? Also let us know
if this concept is unclear, it is a little confusing. </span></p>
</div>
<div class="section level2">
<h2 id="parameter-priors-iter-functions-not-current">Parameter Priors &amp; Iter-Functions (NOT CURRENT)<a class="anchor" aria-label="anchor" href="#parameter-priors-iter-functions-not-current"></a>
</h2>
<p>Functions can be set that sample params at every iteration step</p>
<p>A prior is any function that takes no inputs and returns a parameter
value</p>
<p>Change one parameter to be sampled from a normal distribution every
iteration</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span><span class="op">@</span><span class="va">speciation_local</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>,mean<span class="op">=</span><span class="fl">0.05</span>,sd<span class="op">=</span><span class="fl">0.01</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> </span></code></pre></div>
<p>An iter-function takes an iteration number and returns a parameter
value</p>
<p>Change one parameter to increase linearly every iteration</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span><span class="op">@</span><span class="va">speciation_local</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">iter</span><span class="op">)</span><span class="op">{</span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">iter</span> <span class="op">*</span> <span class="fl">0.001</span><span class="op">)</span><span class="op">}</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span> <span class="op">*</span> <span class="fl">0.001</span>,xlab <span class="op">=</span> <span class="st">"iteration"</span>,ylab <span class="op">=</span> <span class="st">"speciation rate"</span><span class="op">)</span> </span></code></pre></div>
<p><img src="roleR_use_cases_files/figure-html/iterfuns-1.png" width="700"></p>
<p>Create a simple piecewise function where a param changes during some
iterations</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#p@env_sigma &lt;- function(iter){ </span></span>
<span><span class="co">#        if(iter &gt; 400 &amp; iter &lt; 600){ </span></span>
<span><span class="co">#            return(0.75) </span></span>
<span><span class="co">#        } </span></span>
<span><span class="co">#        else{ </span></span>
<span><span class="co">#            return(0.5) </span></span>
<span><span class="co">#        } </span></span>
<span><span class="co">#    } </span></span></code></pre></div>
<p><span style="color:blue">Group Question: What are some ways in which
you would want to vary parameters? Do priors and iterfuncs capture the
kind of parameter variability you would want? </span></p>
<p><span style="color:blue">Group Question: We are considering two ways
of handling priors and iterfuns. The first is allow the parameter slot
to include either a vector or a function as in the example. The second
is have an additional class called roleFunctions that would overwrite
params it contains, for the purpose of avoiding confusion that could be
caused by a multiple-class slot. Let us know if you have any feelings
about these! </span></p>
</div>
<div class="section level2">
<h2 id="simulating-genetic-diversities-not-current">Simulating Genetic Diversities (NOT CURRENT)<a class="anchor" aria-label="anchor" href="#simulating-genetic-diversities-not-current"></a>
</h2>
<p>Add genetic diversities to a run model by backwards time simulation
using msprime</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#model &lt;- simulateSpeciesGenDiv(model) </span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="experiment-organization">Experiment Organization<a class="anchor" aria-label="anchor" href="#experiment-organization"></a>
</h2>
<p>Tag models in an experiment for comparison between different tags</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">exp</span><span class="op">@</span><span class="va">modelRuns</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"basic"</span>,<span class="st">"neut"</span><span class="op">)</span> </span></code></pre></div>
<p>Set metadata of experiment within the object, which is exported when
saving</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exp</span><span class="op">@</span><span class="va">authorMeta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"author"</span><span class="op">=</span><span class="st">"Jacob Idec"</span>,<span class="st">"description"</span><span class="op">=</span><span class="st">"dummy model"</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:blue">Group Question: Is this basic metadata
sufficient? Should the description be split up into more specific parts?
</span></p>
</div>
<div class="section level2">
<h2 id="writing-and-loading">Writing and Loading<a class="anchor" aria-label="anchor" href="#writing-and-loading"></a>
</h2>
<p>Write and load models, experiments, and params</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/writeRoLE.html">writeRole</a></span><span class="op">(</span><span class="va">exp</span>,dir<span class="op">=</span><span class="st">""</span>,filename<span class="op">=</span><span class="st">"test"</span>,save_txt <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span><span class="co">#exp &lt;- readRDS("test.roleexperiment") </span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="predictive-models-not-current">Predictive Models (NOT CURRENT)<a class="anchor" aria-label="anchor" href="#predictive-models-not-current"></a>
</h2>
<p>Use a run experiment to make a model predicting a parameter from
summary stats</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#pred_model &lt;- createPredModel(exp,param_name = "speciation_local", preds=c("hill_abund1","hill_abund2")) </span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Andrew Rominger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
